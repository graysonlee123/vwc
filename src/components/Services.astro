---
import {
AFFILIATE_URL_AULANI,
  AFFILIATE_URL_DISNEY,
  QUOTE_URL,
} from '@lib/constants';
import Card from '@components/Card.astro';
import Container from '@components/Container.astro';
import Testimonial from '@components/Testimonial.astro';

import aulaniResortImage from '@assets/images/disneysAulaniResort-20x13.jpg';
import cruisingAdventuresImage from '@assets/images/cruiseshipWaterslide-20x13.jpg';
import universalOrlandoImage from '@assets/images/hogwarts-20x13.jpg';
import disneyDestinationsImage from '@assets/images/magicKingdomParade-20x13.jpg';
import sandalsVacationsImage from '@assets/images/beachAerial-20x13.jpg';
import allInclusivesImage from '@assets/images/allInclusiveHotelRoom-20x13.jpg';

import type { ComponentProps } from 'astro/types';

const sizes = 'calc(85vw - 3rem), (width >= 612px) calc((85vw - 3rem - 1.5rem) / 2), (width >= 904px) calc((85vw - 3rem - 1.5rem - 1.5rem) / 3), (width >= 992px) calc((((85vw - 3rem - 3rem) * 2 / 3) - 1.5rem) / 2), (width >= 1384) calc((((85vw - 3rem - 3rem) * 2 / 3) - 1.5rem - 1.5rem) / 3), (width >= 1530px) 252px';
const widths = [1008, 504, 252];

const services: ComponentProps<typeof Card>[] = [
  {
    title: 'Disney Destinations',
    imageProps: {
      src: disneyDestinationsImage,
      alt: 'A child looking at a Disney float with Disney princesses on it',
      sizes,
      widths,
    },
    buttonText: 'Learn More',
    href: AFFILIATE_URL_DISNEY,
    target: '_blank',
    rel: 'noopener noreferrer',
  },
  {
    title: 'Universal Orlando',
    imageProps: {
      src: universalOrlandoImage,
      alt: 'Photo of the Hogwarts Castle at Universal Orlando at night',
      sizes,
      widths,
    },
    buttonText: 'Get a Quote',
    href: QUOTE_URL,
    target: '_blank',
    rel: 'noopener noreferrer',
  },
  {
    title: 'Cruising Adventures',
    imageProps: {
      src: cruisingAdventuresImage,
      alt: 'Aerial view of a Disney Cruise Ship at sea at sunset',
      sizes,
      widths,
    },
    buttonText: 'Get a Quote',
    href: QUOTE_URL,
    target: '_blank',
    rel: 'noopener noreferrer',
  },
  {
    title: "Disney's Aulani",
    imageProps: {
      src: aulaniResortImage,
      alt: "Off-shore photo of the tropical Disney's Aulani resort, there are two large hotel buildings",
      sizes,
      widths,
    },
    buttonText: 'Learn More',
    href: AFFILIATE_URL_AULANI,
    target: '_blank',
    rel: 'noopener noreferrer',
  },
  {
    title: 'Sandals Vacations',
    imageProps: {
      src: sandalsVacationsImage,
      alt: 'Aerial view of a beach with people enjoying the sand and the water',
      sizes,
      widths,
    },
    buttonText: 'Get a Quote',
    href: QUOTE_URL,
    target: '_blank',
    rel: 'noopener noreferrer',
  },
  {
    title: 'All-Inclusives',
    imageProps: {
      src: allInclusivesImage,
      alt: 'A tropical all-inclusive hotel room looking out at the beach and ocean',
      sizes,
      widths,
    },
    buttonText: 'Get a Quote',
    href: QUOTE_URL,
    target: '_blank',
    rel: 'noopener noreferrer',
  },
];
---

<section class="section">
  <Container breakpoint='sm'>
    <div class="layout">
      <div class="cards">
        {
          services.map(({ title, buttonText, href, target, rel, imageProps }) => (
            <div class="item">
              <Card
                title={title}
                buttonText={buttonText}
                href={href}
                target={target}
                imageProps={imageProps}
                rel={rel}
              />
            </div>
          ))
        }
      </div>
      <div class="testimonial">
        <Testimonial />
      </div>
    </div>
  </Container>
</section>

<style>
  .layout {
    position: relative;
    z-index: 0;
    display: grid;
    align-items: center;
    row-gap: 3rem;
    column-gap: 3rem;
    padding: 1.5rem;
    text-align: center;
    background-color: #fff;
    border-radius: 2rem;
    outline-width: 2px;
    outline-style: solid;
    outline-color: hsl(var(--color--gray--100));
    outline-offset: -2px;
  }

  @media (width < 36rem) {
    .section {
      padding: 0.75rem;
    }

    .cards {
      display: flex;
      gap: 1.5rem;
      overflow-x: auto;
    }

    .item {
      width: 16rem;
      max-width: 80%;
      flex-shrink: 0;
    }
  }

  @media (width >= 36rem) {
    .cards {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }
  }

  @media (width >= 62rem) {
    .section {
      margin-top: -4rem;
    }

    .layout {
      grid-template-columns: 2fr 1fr;
    }
  }

  @media (width >= 36rem) and (width < 62rem) {
    .section {
      margin-top: 2rem;
    }
  }

  @media (width >= 75rem) {
    .cards {
      grid-template-columns: repeat(3, 1fr);
    }
  }
</style>
